$(document).ready(function(){var a=$("#deleteButton");const e=$("#confirmationDialog");var r=$("#confirmDeleteButton"),o=$("#cancelDeleteButton");function t(){e.hide()}a.on("click",function(){e.show()}),r.on("click",function(){deleteAction(),$deleteForm.submit(),t()}),o.on("click",t);a=(new Date).toISOString().split("T")[0];function s(a){var e=$("#dataMarcada").val(),e=new Date(e),a=(e.setDate(e.getDate()+a),e.toISOString().split("T")[0]);$("#dataMarcada").val(a),n(a)}function n(a){$.ajax({url:"/admin/atualizar_data",type:"POST",data:{data:a},dataType:"json",success:function(a){var e=a.horarios;if("fechada"===e)for(var r=0;r<e.length;r++){var o=$(".td");o.empty(),o.addClass("fechada"),o.removeClass("marcado"),o.removeClass("marcado-corte-barba"),m.empty()}else for(r=0;r<e.length;r++){var t,s,n,c=e[r].horario,i=e[r].nome,l=e[r].idAgendamento,d=e[r].servico,m=$("#horario-"+c.replace(":","-").replace(" ","-")),u=("16:00"===e[e.length-1].horario?(c=$("#horario-16-30"),n=$("#horario-17-00"),u=$("#horario-17-30"),t=$("#horario-18-00"),s=$("#horario-18-30"),c.addClass("fechada"),n.addClass("fechada"),u.addClass("fechada"),t.addClass("fechada"),s.addClass("fechada"),c.empty(),n.empty(),u.empty(),t.empty(),s.empty(),c.removeClass("marcado-corte-barba"),n.removeClass("marcado-corte-barba"),u.removeClass("marcado-corte-barba"),t.removeClass("marcado-corte-barba"),s.removeClass("marcado-corte-barba")):(c=$("#horario-08-00"),n=$("#horario-08-30"),c.empty(),n.empty(),c.addClass("fechada"),n.addClass("fechada")),m.removeClass("fechada"),i?(m.addClass("marcado"),"Corte e barba"==d?(m.addClass("marcado-corte-barba"),m.removeClass("marcado")):(m.empty(),m.removeClass("marcado-corte-barba"))):(m.empty(),m.removeClass("marcado"),m.removeClass("marcado-corte-barba")),$("<a></a>"));u.attr("href","agendamentos-edit/"+l),u.text(i),m.empty(),m.append(u)}},error:function(a,e,r){if(a.responseText)try{var o=JSON.parse(a.responseText);o.hasOwnProperty("error")?alert("Erro: "+o.error):alert("Ocorreu um erro na requisição.")}catch(a){alert("Ocorreu um erro na requisição: "+r)}else alert("Ocorreu um erro na requisição: "+r)}})}$("#dataMarcada").val(a),n(a),$("#btnVoltar").click(function(){s(-1)}),$("#btnProximo").click(function(){s(1)}),$("#data").change(function(){var a,e=$("#data").val(),r=$("#tempo").val();e=e,a="",(r=r)&&(a=r.split(";")[0]),$.ajax({url:"/admin/atualizar_horarios",type:"POST",data:{data:e,tempoServico:a},dataType:"json",success:function(a){if(a&&a.horarios){$("#horariosDisponiveis").empty();for(var e=0;e<a.horarios.length;e++){var r=a.horarios[e];$("#horariosDisponiveis").append("<option>"+r+"</option>")}}},error:function(a,e,r){if(a.responseText)try{var o=JSON.parse(a.responseText);o.hasOwnProperty("error")?alert("Erro: "+o.error):alert("Ocorreu um erro na requisição.")}catch(a){alert("Ocorreu um erro na requisição: "+r)}else alert("Ocorreu um erro na requisição: "+r)}})}),$("#dataMarcada").change(function(){n($("#dataMarcada").val())}),$("body header .container .left a").on("click",function(){$(".menu_lateral").toggleClass("active"),$("body.admin").toggleClass("menu_active")}),$("body .menu_lateral .close").on("click",function(){$(".menu_lateral").toggleClass("active"),$("body.admin").toggleClass("menu_active")}),$("header .container .bar").on("click",function(){$(this).next().toggleClass("active"),$(this).children().toggleClass("<fa-solid fa-xmark"),$("body").toggleClass("menu-active")}),$("form.form_ajax").length&&jQuery().ajaxForm&&$("form.form_ajax").on("submit",function(a){a.preventDefault();var e=$(this),r=e.children(".alerta");return e.ajaxSubmit({dataType:"json",success:function(a){a.msg&&r.html(a.msg),"0"!=a.status?r.addClass("sucesso"):r.addClass("erro"),a.redirecionar_pagina&&(window.location=a.redirecionar_pagina),a.resetar_form&&e[0].reset(),setTimeout(function(){r.html(""),r.removeClass("sucesso"),r.removeClass("erro")},4e3)}}),!1})});